<% const truncate = (input, size) => input.length > size ? `${input.substring(0,
size)}...` : input; %>
<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head'); %>
  </head>
  <body class="container max-w-full max-h-screen">
    <%- include('../partials/header'); %>

    <main class="ml-16 mr-16">
      <br />
      <h1 class="mb-8 text-3xl"><%= title %></h1>

      <p>Liitteitä löytyi: <%= foundCount %></p>
      

      <div class="btn-group">
        <% if (page > 1) { %>
          <a href="<%= pagination.lastPage %>" class="btn">Edellinen</a>
        <% } %>
        <% for (let key in pagination.links) { %>
          <% if (pagination.links[key].page*10 < foundCount+10) { %>
            <% if (pagination.links[key].page == page) { %>
              <a href="<%= pagination.links[key].link %>" class="btn btn-active"><%= pagination.links[key].page %></a>
            <% } else { %>
              <a href="<%= pagination.links[key].link %>" class="btn"><%= pagination.links[key].page %></a>
            <% } %>
          <% } %>
        <% } %>
        <% if ((page*10)+10 < foundCount) { %>
          <a href="<%= pagination.nextPage %>" class="btn">Seuraava</a>
        <% } %>
      </div>


      <% for (let i=0; i < pastes.length; i++) { %>

      <div class="card shadow-lg">
        <div class="card-body">
          <h2 class="card-title">
            <a class="hover:underline break-words" href="/p/<%= pastes[i].id %>"
              ><%= pastes[i].title ? truncate(pastes[i].title, 50) : "Nimetön"
              %></a
            >
          </h2>
          <p class="mt-5 break-words">
            <%= pastes[i].content ? truncate(pastes[i].content, 500) : "Tyhjyys"
            %>
          </p>
        </div>
      </div>
      <br />
      <% } %>


      <div class="btn-group">
        <% if (page > 1) { %>
          <a href="<%= pagination.lastPage %>" class="btn">Edellinen</a>
        <% } %>
        <% for (let key in pagination.links) { %>
          <% if (pagination.links[key].page*10 < foundCount+10) { %>
            <% if (pagination.links[key].page == page) { %>
              <a href="<%= pagination.links[key].link %>" class="btn btn-active"><%= pagination.links[key].page %></a>
            <% } else { %>
              <a href="<%= pagination.links[key].link %>" class="btn"><%= pagination.links[key].page %></a>
            <% } %>
          <% } %>
        <% } %>
        <% if ((page*10)+10 < foundCount) { %>
          <a href="<%= pagination.nextPage %>" class="btn">Seuraava</a>
        <% } %>
      </div>
      <br>
    </main>
  </body>
</html>
